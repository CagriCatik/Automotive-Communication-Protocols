"use strict";(self.webpackChunkvns=self.webpackChunkvns||[]).push([[3126],{99692:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>d,toc:()=>o});const d=JSON.parse('{"id":"UDS/examples/Control-DTC-Example","title":"Examples - 0x19","description":"Example 1: Enabling a Specific DTC","source":"@site/docs/UDS/04_examples/02_Control-DTC-Example.md","sourceDirName":"UDS/04_examples","slug":"/UDS/examples/Control-DTC-Example","permalink":"/Vehicle-Network-Standards/docs/UDS/examples/Control-DTC-Example","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/UDS/04_examples/02_Control-DTC-Example.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"udsSidebar","previous":{"title":"Examples - 0x10","permalink":"/Vehicle-Network-Standards/docs/UDS/examples/Diagnostics-Sessions-Example"},"next":{"title":"Examples - 0x11","permalink":"/Vehicle-Network-Standards/docs/UDS/examples/ECU-Reset-Example"}}');var i=n(74848),r=n(28453);const t={sidebar_position:2},c="Examples - 0x19",l={},o=[{value:"Example 1: Enabling a Specific DTC",id:"example-1-enabling-a-specific-dtc",level:2},{value:"Scenario",id:"scenario",level:3},{value:"Request Message",id:"request-message",level:3},{value:"Response Message",id:"response-message",level:3},{value:"Example 2: Disabling a Specific DTC",id:"example-2-disabling-a-specific-dtc",level:2},{value:"Scenario",id:"scenario-1",level:3},{value:"Request Message",id:"request-message-1",level:3},{value:"Response Message",id:"response-message-1",level:3},{value:"Example 3: Modifying DTC Settings (Advanced Case)",id:"example-3-modifying-dtc-settings-advanced-case",level:2},{value:"Scenario",id:"scenario-2",level:3},{value:"Request Message",id:"request-message-2",level:3},{value:"Response Message",id:"response-message-2",level:3},{value:"Python Example Code for Sending UDS Request",id:"python-example-code-for-sending-uds-request",level:2},{value:"Python Code to Send UDS Request (Enable DTC)",id:"python-code-to-send-uds-request-enable-dtc",level:3},{value:"Python Code to Receive UDS Response",id:"python-code-to-receive-uds-response",level:3},{value:"CAPL Example Code for UDS (Enable DTC)",id:"capl-example-code-for-uds-enable-dtc",level:2},{value:"Conclusion",id:"conclusion",level:2}];function x(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"examples---0x19",children:"Examples - 0x19"})}),"\n",(0,i.jsx)(s.h2,{id:"example-1-enabling-a-specific-dtc",children:"Example 1: Enabling a Specific DTC"}),"\n",(0,i.jsx)(s.h3,{id:"scenario",children:"Scenario"}),"\n",(0,i.jsxs)(s.p,{children:["A technician wants to enable a specific Diagnostic Trouble Code (DTC) for testing. In this case, we\u2019ll enable DTC ",(0,i.jsx)(s.code,{children:"0x1234"})," as a permanent fault code (",(0,i.jsx)(s.code,{children:"0x00"}),")."]}),"\n",(0,i.jsx)(s.h3,{id:"request-message",children:"Request Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x19"})," - Control DTC Settings"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Subfunction"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x01"})," - Enable DTC"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"DTC Type"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - Permanent DTC"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"DTC"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x1234"})," - The specific DTC to enable"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"5"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - No additional parameters"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Request Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x19 0x01 0x00 0x12 0x34 0x00\n"})}),"\n",(0,i.jsx)(s.h3,{id:"response-message",children:"Response Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x59"})," - Response to Control DTC Settings service"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Positive Response"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - Positive response code (Success)"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - No additional information (Success)"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Response Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x59 0x00 0x00\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"example-2-disabling-a-specific-dtc",children:"Example 2: Disabling a Specific DTC"}),"\n",(0,i.jsx)(s.h3,{id:"scenario-1",children:"Scenario"}),"\n",(0,i.jsxs)(s.p,{children:["A technician needs to disable a specific DTC (",(0,i.jsx)(s.code,{children:"0x5678"}),") temporarily during a diagnostic session for testing purposes."]}),"\n",(0,i.jsx)(s.h3,{id:"request-message-1",children:"Request Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x19"})," - Control DTC Settings"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Subfunction"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x02"})," - Disable DTC"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"DTC Type"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - Permanent DTC"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"DTC"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x5678"})," - The specific DTC to disable"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"5"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x01"})," - Confirmation byte for disabling DTC"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Request Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x19 0x02 0x00 0x56 0x78 0x01\n"})}),"\n",(0,i.jsx)(s.h3,{id:"response-message-1",children:"Response Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x59"})," - Response to Control DTC Settings service"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Positive Response"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - Positive response code (Success)"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - No additional information (Success)"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Response Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x59 0x00 0x00\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"example-3-modifying-dtc-settings-advanced-case",children:"Example 3: Modifying DTC Settings (Advanced Case)"}),"\n",(0,i.jsx)(s.h3,{id:"scenario-2",children:"Scenario"}),"\n",(0,i.jsxs)(s.p,{children:['A technician wants to modify the behavior of a DTC by changing its status to "pending" (',(0,i.jsx)(s.code,{children:"0x01"}),") instead of permanent (",(0,i.jsx)(s.code,{children:"0x00"}),") to simulate an intermediate state during testing."]}),"\n",(0,i.jsx)(s.h3,{id:"request-message-2",children:"Request Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x19"})," - Control DTC Settings"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Subfunction"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x03"})," - Modify DTC Settings"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"DTC Type"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x01"})," - Pending DTC"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"3"}),(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"DTC"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0xABCD"})," - The specific DTC to modify"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"5"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - No additional parameters"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Request Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x19 0x03 0x01 0xAB 0xCD 0x00\n"})}),"\n",(0,i.jsx)(s.h3,{id:"response-message-2",children:"Response Message"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Byte Position"}),(0,i.jsx)(s.th,{children:"Length (Bytes)"}),(0,i.jsx)(s.th,{children:"Field Name"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"0"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Service ID"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x59"})," - Response to Control DTC Settings service"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Positive Response"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - Positive response code (Success)"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"2"}),(0,i.jsx)(s.td,{children:"1"}),(0,i.jsx)(s.td,{children:"Additional Info"}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"0x00"})," - No additional information (Success)"]})]})]})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Response Example:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"0x59 0x00 0x00\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"python-example-code-for-sending-uds-request",children:"Python Example Code for Sending UDS Request"}),"\n",(0,i.jsxs)(s.p,{children:["The following Python code demonstrates how to send a UDS request using the ",(0,i.jsx)(s.code,{children:"python-can"})," library for CAN bus communication. It assumes you're working with a CAN interface like a USB-to-CAN adapter."]}),"\n",(0,i.jsx)(s.h3,{id:"python-code-to-send-uds-request-enable-dtc",children:"Python Code to Send UDS Request (Enable DTC)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"import can\r\nimport struct\r\n\r\n# Define CAN interface\r\nbus = can.interface.Bus(channel='can0', bustype='socketcan')\r\n\r\n# Function to send UDS request\r\ndef send_uds_request(service_id, subfunction, dtc_type, dtc):\r\n    # Construct UDS request message\r\n    message = bytearray()\r\n    message.append(service_id)  # Service ID (0x19 for Control DTC Settings)\r\n    message.append(subfunction)  # Subfunction (e.g., 0x01 for Enable DTC)\r\n    message.append(dtc_type)  # DTC Type (0x00 for Permanent)\r\n    message.extend(struct.pack(\">H\", dtc))  # DTC (2-byte value)\r\n    \r\n    # Send message over CAN bus\r\n    bus.send(can.Message(arbitration_id=0x7E0, data=message))\r\n\r\n# Send request to enable DTC 0x1234\r\nsend_uds_request(0x19, 0x01, 0x00, 0x1234)\r\nprint(\"UDS request sent to enable DTC 0x1234\")\n"})}),"\n",(0,i.jsx)(s.h3,{id:"python-code-to-receive-uds-response",children:"Python Code to Receive UDS Response"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'def receive_uds_response():\r\n    # Listen for a CAN response message\r\n    message = bus.recv()\r\n    if message:\r\n        print(f"Received CAN message: {message}")\r\n        # Parse UDS response\r\n        if message.data[0] == 0x59:  # Response to 0x19\r\n            print("Control DTC Settings response received")\r\n            response_code = message.data[1]\r\n            if response_code == 0x00:\r\n                print("DTC enabled successfully")\r\n            else:\r\n                print(f"Error: {response_code}")\r\n        else:\r\n            print("Unexpected message type")\r\n\r\n# Wait for response (this is a simple blocking example)\r\nreceive_uds_response()\n'})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"capl-example-code-for-uds-enable-dtc",children:"CAPL Example Code for UDS (Enable DTC)"}),"\n",(0,i.jsx)(s.p,{children:"CAPL (CAN Application Programming Language) is used to script diagnostics in CANoe and CANalyzer. Below is a CAPL script to send a UDS request to enable a DTC."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-capl",children:'variables\r\n{\r\n  msTimer timer1;\r\n}\r\n\r\non start\r\n{\r\n  // Send UDS request to enable DTC 0x1234\r\n  output(0x19, 0x01, 0x00, 0x12, 0x34, 0x00);\r\n}\r\n\r\non message 0x7E8\r\n{\r\n  if (this.byte(0) == 0x59)  // Response to Control DTC Settings (0x19)\r\n  {\r\n    if (this.byte(1) == 0x00)\r\n    {\r\n      write("DTC enabled successfully");\r\n    }\r\n    else\r\n    {\r\n      write("Error in enabling DTC");\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,i.jsx)(s.p,{children:'These examples illustrate the implementation of the "Control DTC Settings" service (Service ID 0x19) in various scenarios. By understanding the request and response message formats and implementing them using Python or CAPL, you can control the DTC settings in a vehicle\u2019s ECUs for testing and diagnostic purposes.'}),"\n",(0,i.jsx)(s.p,{children:"When working with UDS, always ensure that your diagnostic tools handle DTC codes and responses correctly and follow the best practices for error handling and security."})]})}function a(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>c});var d=n(96540);const i={},r=d.createContext(i);function t(e){const s=d.useContext(r);return d.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),d.createElement(r.Provider,{value:s},e.children)}}}]);